<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>í™ˆìŠ¤íŒŸ â€“ ì¤‘ê°œì‚¬</title>
<style>
  :root{
    --bg:#f7f8fb; --panel:#ffffff; --line:#e6e8ee; --text:#0f172a; --muted:#6b7280;
    --shadow:0 10px 30px rgba(17,24,39,.06);
    --brand:#B3E5FC;
    --brand-fore:#000;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font:15px/1.55 ui-sans-serif,system-ui,'Noto Sans KR',sans-serif}
  a{color:inherit;text-decoration:none}
  header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--line);z-index:20}
  .wrap{max-width:1200px;margin:0 auto;padding:16px 24px}
  .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .brand{display:flex;align-items:center;gap:10px;font-weight:800}
  .logo{width:23px;height:23px;border-radius:8px;object-fit:cover}
  .right{margin-left:auto;display:flex;gap:10px}
  .btn {
    padding: 10px 14px;
    border: 1px solid var(--line);
    border-radius: 12px;
    background: #fff;
    cursor: pointer;
    font-size: 15px;      
    font-family: inherit; 
  }
  .btn.primary
  {
    background: var(--brand);
    border-color:transparent;
    color:var(--brand-fore);
  }
  .btn:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(0,0,0,.08)}
  .btn.danger{border-color:#fecaca}
  .btn.danger:hover{background:#fee2e2}
  .pill{border-radius:999px;padding:6px 10px;border:1px solid var(--line);background:#fff;font-size:12px;color:#334155}
  .input{padding:10px 12px;border:1px solid var(--line);border-radius:12px;background:#fff;outline:none}
  .muted{color:var(--muted)}
  .section-title{display:flex;align-items:center;justify-content:space-between;margin-top:22px}
  .placeholder{padding:14px;border:1px dashed var(--line);border-radius:12px;background:#fff;color:#6b7280;text-align:center}

  /* Grid & Card */
  .grid{display:grid;gap:16px}
  .grid-3{grid-template-columns:repeat(3,minmax(0,1fr))}
  @media (max-width:1024px){.grid-3{grid-template-columns:1fr}}
  .card{background:#fff;border:1px solid var(--line);border-radius:16px;padding:18px;box-shadow:var(--shadow)}

  /* KPI */
  .kpi{color:#fff;display:flex;align-items:center;justify-content:space-between}
  .kpi .num{font-size:26px;font-weight:800}
  .kpi.views{background:linear-gradient(135deg,#60a5fa,#3b82f6)}
  .kpi.asks{background:linear-gradient(135deg,#34d399,#059669)}
  .kpi.cta{background:linear-gradient(135deg,#2563eb,#60a5fa)}
  .kpi.inbox{background:linear-gradient(135deg,#f472b6,#ec4899)}

  /* Pager */
  .pager{display:flex;gap:8px;flex-wrap:wrap;align-items:center;justify-content:center}
  .pager .btn[disabled]{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}
  .pager .num{padding:8px 12px;border:1px solid var(--line);border-radius:10px;background:#fff;cursor:pointer}
  .pager .num.active
  {
    background:var(--brand);
    border-color:transparent;
    color:var(--brand-fore);
  }
  /* Slide alert panel */
  #slideAlertPanel{
    position:fixed;top:0;right:-320px;width:320px;height:100vh;background:#fff;
    box-shadow:-4px 0 12px rgba(0,0,0,.1);transition:right .3s ease;z-index:1000;padding:20px;overflow-y:auto
  }
  #slideAlertPanel.open{right:0}
  #slideAlertPanel header{font-weight:700;font-size:18px;margin-bottom:12px;display:flex;justify-content:space-between;align-items:center}
  #slideAlertPanel .closeBtn{background:none;border:none;font-size:22px;cursor:pointer}

  /* â–¼â–¼ ë³¸ë¬¸ 'ì•Œë¦¼ ëª©ë¡'ë§Œ ìˆ¨ê¹€(íŒ¨ë„ ê¸°ëŠ¥ì€ ìœ ì§€) â–¼â–¼ */
  #alertsSource { display:none !important; }
  .section-title:has(+ #alertsSource) { display:none !important; }

  /* ===== ë“±ë¡ëœ ë§¤ë¬¼ ì¹´ë“œ í…ìŠ¤íŠ¸ ê°€ë¡œ ê°•ì œ ===== */
  #agent-list, #agent-list * { writing-mode: horizontal-tb !important; }
  #agent-list .card { word-break: keep-all; }
  #agent-list .card .row { flex-wrap: nowrap !important; align-items: flex-start; }
  #agent-list .card .pill { white-space: nowrap; display: inline-flex; align-items: center; }
  #agent-list .card [style*="min-width:0"] { min-width: 1px; }
</style>
</head>
<body>
<!-- ===== Header ===== -->
<header>
  <div class="wrap row">
    <div class="brand">
      <img class="logo" src="home.jpg" alt="í™ˆìŠ¤íŒŸ ë¡œê³ "/>
      í™ˆìŠ¤íŒŸ
    </div>
    <nav class="right" aria-label="ìƒë‹¨ ë©”ë‰´">
      <button id="alertBtn" class="btn" type="button" aria-haspopup="true" aria-controls="slideAlertPanel">ì•Œë¦¼</button>
      <a class="btn" href="profile_setting.html">í”„ë¡œí•„</a>
      <!-- ê¸°ë³¸ê°’: ë¡œê·¸ì•„ì›ƒìœ¼ë¡œ í‘œì‹œ (href ì œê±°) -->
      <a id="logoutBtn" class="btn primary">ë¡œê·¸ì•„ì›ƒ</a>
    </nav>
  </div>
</header>

<!-- ===== Slide Alert Panel ===== -->
<aside id="slideAlertPanel" aria-hidden="true" role="region" aria-label="ì•Œë¦¼ íŒ¨ë„">
  <header>
    <span>ì•Œë¦¼</span>
    <button class="closeBtn" type="button" aria-label="ë‹«ê¸°">&times;</button>
  </header>
  <ul id="slideAlertList" style="padding-left:18px;margin:0">
    <li class="muted">ì•Œë¦¼ ë°ì´í„°ë¥¼ ì—¬ê¸°ì— í‘œì‹œí•©ë‹ˆë‹¤</li>
  </ul>
</aside>

<!-- ===== Main ===== -->
<main class="wrap">

  <!-- KPI / Actions -->
  <section class="dashboard-wrap" style="margin-top:16px;display:flex;gap:16px;flex-wrap:wrap;justify-content:center">
    <div class="card kpi views" style="flex:1;min-width:220px">
      <div>
        <div class="muted" style="color:#e3f2ff">ì˜¤ëŠ˜ ì¡°íšŒìˆ˜</div>
        <div class="num" id="kpi-views">1,248</div>
      </div>
      <div aria-hidden="true">ğŸ“ˆ</div>
    </div>

    <div class="card kpi asks" style="flex:1;min-width:220px">
      <div>
        <div class="muted" style="color:#dcfce7">ì˜¤ëŠ˜ ë¬¸ì˜ìˆ˜</div>
        <div class="num" id="kpi-asks">24</div>
      </div>
      <div aria-hidden="true">ğŸ’¬</div>
    </div>

    <div class="card kpi cta" style="flex:1;min-width:220px">
      <div>
        <b>ë§¤ë¬¼ ë“±ë¡</b>
        <div class="muted" style="color:#e5f1ff">ì‚¬ì§„/ì˜µì…˜/ì£¼ì†Œ ì…ë ¥</div>
      </div>
      <a class="btn" href="property_listing.html" style="color:#0f172a;font-weight:700">ë“±ë¡</a>
    </div>

    <div class="card kpi inbox" style="flex:1;min-width:220px">
      <div>
        <b>ë¬¸ì˜í•¨</b>
        <div class="muted" style="color:#ffe4f1">ì‹¤ì‹œê°„ ìƒë‹´ ì—°ê²°</div>
      </div>
      <button class="btn" type="button" onclick="openChatPopup()">ì—´ê¸°</button>
    </div>
  </section>

  <!-- ì•Œë¦¼(ì›ë³¸ ë¦¬ìŠ¤íŠ¸: íŒ¨ë„ì— ë³µì‚¬í•´ ì‚¬ìš©) -->
  <section class="section-title" style="margin-top:24px">
    <h2 style="margin:0">ì•Œë¦¼ ëª©ë¡</h2>
  </section>
  <ul id="alertsSource" style="padding-left:18px;margin-top:6px">
    <li>ë‚´ì¼ ê³„ì•½ ë¯¸íŒ… ìˆìŒ</li>
    <li>ìƒˆë¡œìš´ ë¬¸ì˜ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤</li>
    <li>ì„ëŒ€ ë§¤ë¬¼ 3ê±´ ì—…ë°ì´íŠ¸ í•„ìš”</li>
  </ul>

  <!-- ìµœê·¼ ë¬¸ì˜/ì•Œë¦¼/ê°€ì´ë“œ -->
  <section class="grid grid-3" style="margin-top:16px">
    <div class="card">
      <div class="section-title"><h3 style="margin:0">ìµœê·¼ ë¬¸ì˜</h3><span class="pill">ì‹¤ì‹œê°„</span></div>
      <div id="inbox" class="placeholder" style="margin-top:8px">ë¬¸ì˜ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì˜ˆì •â€¦</div>
    </div>
    <div class="card">
      <div class="section-title"><h3 style="margin:0">ì•Œë¦¼</h3><span class="pill">ì§€ë‚œ 24ì‹œê°„</span></div>
      <ul id="alertsMirror" style="margin:8px 0 0 18px;padding:0">
        <li class="muted">ì•Œë¦¼ ë°ì´í„° ì—°ê²° ì „â€¦</li>
      </ul>
    </div>
    <div class="card">
      <div class="section-title"><h3 style="margin:0">ê³µì§€/ê°€ì´ë“œ</h3><a href="#" class="pill">ë¬¸ì„œ</a></div>
      <div class="muted" style="margin-top:10px">
        ì‚¬ì§„ ê·œê²©, ì£¼ì†Œ ì‘ì„±ë²•, í—ˆìœ„ë§¤ë¬¼ ë°©ì§€ ì •ì±… ë“± ìš´ì˜ ê°€ì´ë“œë¥¼ í™•ì¸í•˜ì„¸ìš”.
      </div>
    </div>
  </section>

  <!-- ë“±ë¡ëœ ë§¤ë¬¼ -->
  <div class="section-title">
    <h2 style="margin:22px 0 6px">ë“±ë¡ëœ ë§¤ë¬¼</h2>
    <div style="display:flex;gap:8px;align-items:center">
      <input id="listing-search" type="search" placeholder="ì œëª©/ì„¤ëª…/ì£¼ì†Œ ê²€ìƒ‰" class="input" style="width:280px" aria-label="ë§¤ë¬¼ ê²€ìƒ‰">
      <span class="pill">ì¡°íšŒìˆ˜/ë¬¸ì˜ìˆ˜ ì‹¤ì‹œê°„ ë°˜ì˜ ì˜ˆì •</span>
      <button class="btn" type="button" onclick="alert('ì—‘ì…€ ë‹¤ìš´ë¡œë“œ (ì¶”í›„)')">ì—‘ì…€ ë‹¤ìš´ë¡œë“œ</button>
    </div>
  </div>
  <div id="agent-list" class="placeholder" style="margin-top:8px">
    ë“±ë¡ëœ ë§¤ë¬¼ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì˜ˆì •â€¦
  </div>
  <div id="agent-pager" style="margin-top:12px"></div>

</main>

<!-- ===== Scripts ===== -->
<script>
  // ì•Œë¦¼ íŒ¨ë„ í† ê¸€
  (function(){
    const btn = document.getElementById('alertBtn');
    const panel = document.getElementById('slideAlertPanel');
    const closeBtn = panel.querySelector('.closeBtn');
    const alertsSource = document.getElementById('alertsSource');
    const slideList = document.getElementById('slideAlertList');
    const alertsMirror = document.getElementById('alertsMirror');

    function openPanel(){
      slideList.innerHTML = alertsSource.innerHTML;
      alertsMirror.innerHTML = alertsSource.innerHTML;
      panel.classList.add('open');
      panel.setAttribute('aria-hidden','false');
    }
    function closePanel(){
      panel.classList.remove('open');
      panel.setAttribute('aria-hidden','true');
    }

    btn.addEventListener('click', (e)=>{ e.preventDefault(); 
      if(panel.classList.contains('open')) closePanel(); else openPanel();
    });
    closeBtn.addEventListener('click', closePanel);
    panel.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closePanel(); });
  })();

  // KPI ì‹œê°íš¨ê³¼ (ë°ëª¨ìš©)
  setInterval(()=>{
    const f=n=>n.toLocaleString('ko-KR');
    const v=document.getElementById('kpi-views');
    const a=document.getElementById('kpi-asks');
    v.textContent=f(parseInt(v.textContent.replace(/,/g,''))+Math.floor(Math.random()*3));
    a.textContent=(parseInt(a.textContent)+(Math.random()<.3?1:0));
  },3000);

  // ë¬¸ì˜ íŒì—…
  function openChatPopup(){
    const width=600, height=800;
    const left=(window.screen.width-width)/2;
    const top=(window.screen.height-height)/2;
    window.open('chat.html','chatWindow',
      `width=${width},height=${height},left=${left},top=${top},resizable=yes`);
  }

  // â–¼â–¼ ë¡œê·¸ì¸ ìƒíƒœ ë²„íŠ¼ ì„¸íŒ… (localStorage ì‚¬ìš©) â–¼â–¼
  (function () {
    const btn = document.getElementById('logoutBtn');

    const qs = new URLSearchParams(location.search);
    if (qs.get('loggedIn') === '1') {
      localStorage.setItem('isLoggedIn', '1');
      history.replaceState({}, '', location.pathname);
    }

    function setBtn(loggedIn) {
      if (loggedIn) {
        btn.textContent = 'ë¡œê·¸ì•„ì›ƒ';
        btn.removeAttribute('href');
        btn.dataset.state = 'in';
      } else {
        btn.textContent = 'ë¡œê·¸ì¸';
        btn.setAttribute('href', 'login.html');
        btn.dataset.state = 'out';
      }
    }

    const stored = localStorage.getItem('isLoggedIn');
    const isLoggedIn = (stored === null) ? true : (stored === '1');
    setBtn(isLoggedIn);

    btn.addEventListener('click', function (e) {
      if (btn.dataset.state === 'in') {
        e.preventDefault();
        localStorage.removeItem('isLoggedIn');
        setBtn(false);

        /* â–¼â–¼ ë¡œê·¸ì•„ì›ƒ ì§í›„: ì•Œë¦¼/ëª©ë¡ UI ì´ˆê¸°í™” â–¼â–¼ */
        try {
          // ì•Œë¦¼ ì¹´ë“œ ì´ˆê¸°í™”
          const alertsMirror = document.getElementById('alertsMirror');
          if (alertsMirror) {
            alertsMirror.innerHTML = '<li class="muted">ì•Œë¦¼ ë°ì´í„° ì—°ê²° ì „â€¦</li>';
          }
          // ì•Œë¦¼ íŒ¨ë„ ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™” + ë‹«ê¸°
          const slideList = document.getElementById('slideAlertList');
          if (slideList) {
            slideList.innerHTML = '<li class="muted">ì•Œë¦¼ ë°ì´í„°ë¥¼ ì—¬ê¸°ì— í‘œì‹œí•©ë‹ˆë‹¤</li>';
          }
          const panel = document.getElementById('slideAlertPanel');
          if (panel) {
            panel.classList.remove('open');
            panel.setAttribute('aria-hidden', 'true');
          }
          // ë“±ë¡ëœ ë§¤ë¬¼ ëª©ë¡/í˜ì´ì € ìˆ¨ê¹€
          const listBox = document.getElementById('agent-list');
          const pagerBox = document.getElementById('agent-pager');
          if (listBox)  listBox.innerHTML = '<div class="placeholder">ë¡œê·¸ì¸ í›„ í™•ì¸í•˜ì„¸ìš”.</div>';
          if (pagerBox) pagerBox.innerHTML = '';
        } catch (e) { /* no-op */ }
        /* â–²â–² ì—¬ê¸°ê¹Œì§€ë§Œ ì¶”ê°€ â–²â–² */

        alert('ë¡œê·¸ì•„ì›ƒì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤');
      }
    });
  })();

  // ë§¤ë¬¼ ëª©ë¡ ë¡œë”© ëª¨ë“ˆ
  (function(){
    const state={ page:1, pageSize:9, q:'' };

    const fmt = n => (n==null ? '' : Number(n).toLocaleString('ko-KR'));
    const esc = s => String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    const propText = p => ({ apartment:'ì•„íŒŒíŠ¸', officetel:'ì˜¤í”¼ìŠ¤í…”', rowhouse:'ë¹Œë¼/ì—°ë¦½', detached:'ë‹¨ë…/ë‹¤ê°€êµ¬' }[p] || p);
    const statusText = s => ({ active:'ë…¸ì¶œì¤‘', sold:'ê±°ë˜ì™„ë£Œ', removed:'ë¹„ê³µê°œ' }[s] || s);
    function dealText(i){
      if(i.deal_type==='sale')     return `ë§¤ë§¤ ${fmt(i.price_sale_10k)}ë§Œì›`;
      if(i.deal_type==='jeonse')   return `ì „ì„¸ ${fmt(i.deposit_10k)}ë§Œì›`;
      if(i.deal_type==='monthly'){
        if(i.rent_pay_cycle==='yearly') return `ì—°ì„¸ ë³´ì¦ê¸ˆ ${fmt(i.deposit_10k)} / ì—°ì„¸ ${fmt(i.rent_annual_10k)}ë§Œì›`;
        return `ì›”ì„¸ ${fmt(i.deposit_10k)} / ${fmt(i.rent_10k)}ë§Œì›`;
      }
      return i.deal_type;
    }
    const qs = o => Object.entries(o).map(([k,v])=>`${encodeURIComponent(k)}=${encodeURIComponent(v)}`).join('&');

    async function loadMyListings(){
      const listBox=document.getElementById('agent-list');
      const pagerBox=document.getElementById('agent-pager');
      listBox.textContent='ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦';
      pagerBox.innerHTML='';

      let res;
      try{
        res = await fetch(`/api/my-listings?${qs({page:state.page,pageSize:state.pageSize,q:state.q})}`, { credentials:'same-origin' });
      }catch(e){
        listBox.textContent='ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜';
        return;
      }
      if(!res.ok){ listBox.textContent='ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨'; return; }
      const data = await res.json().catch(()=>({}));
      if(!data || data.ok===false){ listBox.textContent='ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨'; return; }

      const { items=[], total=0 } = data;
      if(items.length===0){
        listBox.innerHTML='<div class="placeholder">ë“±ë¡ëœ ë§¤ë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
        return;
      }

      // ëª©ë¡ ë Œë” (ë²„íŠ¼ì„ ì •ë³´ ë°‘ìœ¼ë¡œ ì´ë™)
      const grid=document.createElement('div');
      grid.className='grid grid-3';
      items.forEach(i=>{
        const img = i.main_image_url ? `/uploads/${i.main_image_url}` : null;
        const card=document.createElement('div');
        card.className='card';
        card.innerHTML=`
          <div class="row" style="gap:12px;align-items:flex-start">
            <div class="thumb" style="width:140px;height:100px;border-radius:12px;background:#f2f4f8;overflow:hidden;flex:0 0 140px">
              ${img ? `<img src="${img}" alt="${esc(i.title)} ëŒ€í‘œ ì´ë¯¸ì§€" style="width:100%;height:100%;object-fit:cover">`
                    : `<div class="muted" style="display:flex;align-items:center;justify-content:center;height:100%">ì´ë¯¸ì§€ ì—†ìŒ</div>`}
            </div>
            <div style="flex:1;min-width:0">
              <div class="meta" style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:4px">
                <span class="pill">${propText(i.property_type)}</span>
                <span class="pill">${dealText(i)}</span>
                <span class="pill">${statusText(i.status)}</span>
              </div>
              <div style="font-weight:800;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${esc(i.title)}</div>
              ${i.description ? `<div class="muted" style="margin-top:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${esc(i.description)}</div>` : ''}
              <div class="muted" style="margin-top:6px;font-size:12px">ë“±ë¡ì¼ ${new Date(i.created_at).toLocaleDateString('ko-KR')}</div>
              <div style="display:flex;gap:8px;margin-top:10px">
                <a class="btn" href="/property_listing.html?edit=${i.listing_id}">ìˆ˜ì •</a>
                <button class="btn danger" data-del="${i.listing_id}" type="button">ì‚­ì œ</button>
              </div>
            </div>
          </div>`;
        grid.appendChild(card);
      });
      listBox.replaceWith(grid);
      grid.id='agent-list';

      // í˜ì´ì €
      const pages=Math.max(1, Math.ceil(total/state.pageSize));
      if(pages>1){
        const p=document.createElement('div');
        p.className='pager';
        const prev=document.createElement('button');
        prev.className='btn'; prev.textContent='ì´ì „';
        prev.disabled = state.page<=1;
        prev.onclick=()=>{ state.page--; loadMyListings(); };

        const next=document.createElement('button');
        next.className='btn'; next.textContent='ë‹¤ìŒ';
        next.disabled = state.page>=pages;
        next.onclick=()=>{ state.page++; loadMyListings(); };

        p.appendChild(prev);

        const win=3;
        const start=Math.max(1, state.page-win);
        const end=Math.min(pages, state.page+win);
        for(let i=start;i<=end;i++){
          const b=document.createElement('button');
          b.className='num'+(i===state.page?' active':'');
          b.textContent=i;
          b.onclick=()=>{ state.page=i; loadMyListings(); };
          p.appendChild(b);
        }
        p.appendChild(next);
        document.getElementById('agent-pager').replaceChildren(p);
      }else{
        document.getElementById('agent-pager').innerHTML='';
      }
    }

    // ê²€ìƒ‰ ë””ë°”ìš´ìŠ¤
    function debounce(fn,ms){let t;return function(...a){clearTimeout(t);t=setTimeout(()=>fn.apply(this,a),ms)}}
    const searchInput=document.getElementById('listing-search');
    if(searchInput){
      const run=debounce(()=>{ state.q=searchInput.value.trim(); state.page=1; loadMyListings(); },300);
      searchInput.addEventListener('input', run);
      searchInput.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); run(); } });
    }

    // ì‚­ì œ í•¸ë“¤ëŸ¬
    document.addEventListener('click', async (e)=>{
      const btn=e.target.closest('button.btn.danger[data-del]');
      if(!btn) return;
      const id=btn.getAttribute('data-del');
      if(!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ì–´ìš”?')) return;
      const res=await fetch(`/api/listings/${id}`,{ method:'DELETE', credentials:'same-origin' });
      const out=await res.json().catch(()=>({}));
      if(res.ok && out.ok){
        if(document.querySelectorAll('#agent-list .card').length===1 && state.page>1){
          state.page-=1;
        }
        loadMyListings();
      }else{
        alert(out.message || 'ì‚­ì œ ì‹¤íŒ¨');
      }
    });

    // ìµœì´ˆ ë¡œë”©
    document.addEventListener('DOMContentLoaded', loadMyListings);
  })();
</script>
</body>
</html>