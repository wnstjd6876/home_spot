<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>홈스팟 – 세입자</title>
  <style>
    :root {
      --bg: #f7f8fb;
      --panel: #ffffff;
      --line: #e6e8ee;
      --text: #0f172a;
      --muted: #6b7280;
      --shadow: 0 10px 30px rgba(17, 24, 39, 0.06);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font: 15px/1.55 ui-sans-serif, system-ui, "Noto Sans KR", sans-serif;
    }
    a { color: inherit; text-decoration: none; }
    header { position: sticky; top: 0; z-index: 20; background: #fff; border-bottom: 1px solid var(--line); }
    .wrap { max-width: 1200px; margin: 0 auto; padding: 16px 24px; }
    .row { display: flex; align-items: center; gap: 14px; flex-wrap: wrap; }
    .brand { display: flex; align-items: center; gap: 10px; font-weight: 800; }
    .logo { width: 28px; height: 28px; border-radius: 8px; background: linear-gradient(135deg, #2563eb, #8b5cf6); }
    .right { margin-left: auto; display: flex; gap: 10px; }
    .btn {
      padding: 10px 14px; border: 1px solid var(--line); border-radius: 12px;
      background: #fff; cursor: pointer;
    }
    .btn.primary { background: #2563eb; color: #fff; border-color: transparent; }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 6px 18px rgba(0,0,0,0.08); }

    .hero {
      margin-top: 18px; border-radius: 20px; padding: 28px;
      background: radial-gradient(900px 350px at 15% -50%, #dbeafe 10%, transparent 60%),
                  linear-gradient(135deg, #eff6ff, #f5f3ff);
      border: 1px solid var(--line); box-shadow: var(--shadow);
    }
    .hero h1 { margin: 0 0 8px; font-size: 26px; }

    .search {
      display: flex; gap: 10px; align-items: center;
      background: #fff; border: 1px solid var(--line); border-radius: 999px;
      padding: 10px 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.03); width: 100%;
    }
    .search select {
      border: 1px solid var(--line); border-radius: 999px;
      padding: 8px 10px; background: #fff; outline: 0;
    }
    .search input { border: 0; outline: 0; flex-grow: 1; font-size: 16px; background: transparent; padding: 6px 4px; }
    .search button { margin-left: auto; }

    .filterbar { margin-top: 12px; display: flex; gap: 10px; flex-wrap: wrap; }
    .chip { border: 1px solid var(--line); background: #fff; border-radius: 999px; padding: 8px 12px; cursor: pointer; }
    .chip.active { background: #eef2ff; border-color: #c7d2fe; }

    .section-title { display: flex; align-items: center; justify-content: space-between; margin-top: 20px; }
    .grid { display: grid; gap: 16px; }
    .grid-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    @media (max-width: 1024px) { .grid-3 { grid-template-columns: 1fr; } }

    .card {
      background: #fff; border: 1px solid var(--line); border-radius: 16px;
      padding: 18px; box-shadow: var(--shadow); position: relative; overflow: hidden;
    }
    .card .desc { opacity: 0.85; }
    .thumb {
      position: absolute; right: 16px; bottom: 16px;
      width: 70px; height: 70px; border-radius: 14px;
      background: rgba(255,255,255,0.25); display: grid; place-items: center; font-size: 28px;
    }

    .cat { color: #fff; }
    .cat.house     { background: linear-gradient(135deg, #60a5fa, #3b82f6); }
    .cat.apartment { background: linear-gradient(135deg, #f87171, #ef4444); }
    .cat.office    { background: linear-gradient(135deg, #34d399, #059669); }
    .cat.rowhouse  { background: linear-gradient(135deg, #22d3ee, #06b6d4); }
    .cat.detached  { background: linear-gradient(135deg, #a3e635, #84cc16); }
    .cat.sale      { background: linear-gradient(135deg, #a78bfa, #7c3aed); }
    .cat.allsearch    { background: linear-gradient(135deg, #f472b6, #ec4899); }
    .cat.favorites { background: linear-gradient(135deg, #fb7185, #f59e0b); }

    .placeholder { padding: 14px; border: 1px dashed var(--line); border-radius: 12px; background: #fff; color: #6b7280; text-align: center; }
    .favbar { display: flex; gap: 10px; overflow: auto; }
    .fav { min-width: 220px; background: #fff; border: 1px solid var(--line); border-radius: 12px; padding: 12px; }
  </style>
</head>
<body>

<header>
  <div class="wrap row">
    <div class="brand">
      <div class="logo"></div>
      홈스팟
    </div>
    <nav class="right">
      <a class="btn" href="tenant_favorites.html">관심목록</a>

      <!-- 비로그인일 때 -->
      <a class="btn" id="btnLogin" href="login.html">로그인</a>
      <a class="btn primary" id="btnSignup" href="tenant_signup.html">회원가입</a>

      <!-- 로그인 후 보이게 -->
      <a class="btn" id="btnProfile" href="profile_setting.html" style="display:none">프로필</a>
      <a class="btn" id="btnLogout" href="/logout" style="display:none">로그아웃</a>
    </nav>
  </div>
</header>

<main class="wrap">

  <section class="hero">
    <h1>조건 맞는 집, 빠르게 찾자 🧭</h1>

    <!-- 검색 바: 유형 드롭다운 + 검색어 + 버튼 -->
    <div class="search">
      <label for="ptype" style="font-size:12px; color:#64748b;">유형</label>
      <select id="ptype" aria-label="매물 유형 선택">
        <option value="apartment">아파트</option>
        <option value="officetel">오피스텔</option>
        <option value="rowhouse">연립·다세대</option>
        <option value="detached">단독주택</option>
      </select>
      <input id="q" placeholder="지역 · 지하철역 · 키워드로 검색" />
      <button class="btn" onclick="goSearch()">검색</button>
    </div>
  </section>

  <!-- 카테고리 카드 -->
  <section class="grid grid-3" style="margin-top:16px">
    <a class="card cat apartment" href="search_apartment.html">
      <h3>아파트</h3>
      <div class="desc">단지 정보 · 실거래가 알림</div>
      <div class="thumb">🏢</div>
    </a>

    <a class="card cat office" href="search_officetel.html">
      <h3>오피스텔</h3>
      <div class="desc">다양한 옵션과 합리적 전월세</div>
      <div class="thumb">🏙️</div>
    </a>

    <a class="card cat rowhouse" href="search_rowhouse.html">
      <h3>연립·다세대</h3>
      <div class="desc">실속 있는 주거 선택지</div>
      <div class="thumb">🏘️</div>
    </a>

    <a class="card cat detached" href="search_detached.html">
      <h3>단독주택</h3>
      <div class="desc">마당/주차 등 라이프스타일별 선택</div>
      <div class="thumb">🏠</div>
    </a>

    <a class="card cat allsearch" href="all_listings.html">
          <h3>전체 매물</h3>
          <div class="desc">모든 매물 모아보기</div>
          <div class="thumb" aria-hidden="true">❤</div>
        </a>

    <a class="card cat favorites" href="tenant_favorites.html">
      <h3>내 찜목록</h3>
      <div class="desc">저장한 매물 모아보기</div>
      <div class="thumb" aria-hidden="true">❤</div>
    </a>

    
  </section>

  <!-- AI 추천 매물 -->
  <div class="section-title" style="margin-top:20px; margin-bottom:12px">
    <h2 style="margin:0">추천 매물</h2>
  </div>


</main>

<script>
  // 유형→검색 페이지 매핑
  const TYPE_TO_PAGE = {
    apartment: 'search_apartment.html',
    officetel: 'search_officetel.html',
    rowhouse:  'search_rowhouse.html',
    detached:  'search_house.html',
  };

  function goSearch() {
    const type = (document.getElementById('ptype').value || 'apartment').trim();
    const q = document.getElementById('q').value.trim();
    const base = TYPE_TO_PAGE[type] || TYPE_TO_PAGE.apartment;
    const url = base + (q ? ('?q=' + encodeURIComponent(q)) : '');
    location.href = url;
  }

  // Enter로도 검색 실행
  document.getElementById('q').addEventListener('keydown', (e) => {
    if (e.key === 'Enter') goSearch();
  });
  document.getElementById('ptype').addEventListener('keydown', (e) => {
    if (e.key === 'Enter') goSearch();
  });

  // 토글 칩 데모
  document.querySelectorAll('.chip[data-k]').forEach(btn => {
    btn.addEventListener('click', () => btn.classList.toggle('active'));
  });

  function resetFilters() {
    document.querySelectorAll('.chip.active').forEach(b => b.classList.remove('active'));
  }

   (async function checkLogin(){
    try{
      const r = await fetch('/api/me',{credentials:'include'});
      if(!r.ok) return;
      const d = await r.json();
      if(d && d.ok){
        // 로그인 상태
        document.getElementById('btnLogin').style.display   = 'none';
        document.getElementById('btnSignup').style.display  = 'none';
        document.getElementById('btnProfile').style.display = '';
        document.getElementById('btnLogout').style.display  = '';
      }
    }catch(e){}
  })();
</script>

</body>
</html>
