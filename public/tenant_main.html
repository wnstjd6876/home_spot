<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>í™ˆìŠ¤íŒŸ â€“ ì„¸ì…ì</title>
  <style>
    :root {
      --bg: #f7f8fb;
      --panel: #ffffff;
      --line: #e6e8ee;
      --text: #0f172a;
      --muted: #6b7280;
      --shadow: 0 10px 30px rgba(17, 24, 39, 0.06);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font: 15px/1.55 ui-sans-serif, system-ui, "Noto Sans KR", sans-serif;
    }
    a { color: inherit; text-decoration: none; }
    header { position: sticky; top: 0; z-index: 20; background: #fff; border-bottom: 1px solid var(--line); }
    .wrap { max-width: 1200px; margin: 0 auto; padding: 16px 24px; }
    .row { display: flex; align-items: center; gap: 14px; flex-wrap: wrap; }
    .brand { display: flex; align-items: center; gap: 10px; font-weight: 800; }
    .logo { width: 28px; height: 28px; border-radius: 8px; background: linear-gradient(135deg, #2563eb, #8b5cf6); }
    .right { margin-left: auto; display: flex; gap: 10px; }
    .btn {
      padding: 10px 14px; border: 1px solid var(--line); border-radius: 12px;
      background: #fff; cursor: pointer;
    }
    .btn.primary { background: #2563eb; color: #fff; border-color: transparent; }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 6px 18px rgba(0,0,0,0.08); }

    .hero {
      margin-top: 18px; border-radius: 20px; padding: 28px;
      background: radial-gradient(900px 350px at 15% -50%, #dbeafe 10%, transparent 60%),
                  linear-gradient(135deg, #eff6ff, #f5f3ff);
      border: 1px solid var(--line); box-shadow: var(--shadow);
    }
    .hero h1 { margin: 0 0 8px; font-size: 26px; }

    .search {
      display: flex; gap: 10px; align-items: center;
      background: #fff; border: 1px solid var(--line); border-radius: 999px;
      padding: 10px 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.03); width: 100%;
    }
    .search select {
      border: 1px solid var(--line); border-radius: 999px;
      padding: 8px 10px; background: #fff; outline: 0;
    }
    .search input { border: 0; outline: 0; flex-grow: 1; font-size: 16px; background: transparent; padding: 6px 4px; }
    .search button { margin-left: auto; }

    .filterbar { margin-top: 12px; display: flex; gap: 10px; flex-wrap: wrap; }
    .chip { border: 1px solid var(--line); background: #fff; border-radius: 999px; padding: 8px 12px; cursor: pointer; }
    .chip.active { background: #eef2ff; border-color: #c7d2fe; }

    .section-title { display: flex; align-items: center; justify-content: space-between; margin-top: 20px; }
    .grid { display: grid; gap: 16px; }
    .grid-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    @media (max-width: 1024px) { .grid-3 { grid-template-columns: 1fr; } }

    .card {
      background: #fff; border: 1px solid var(--line); border-radius: 16px;
      padding: 18px; box-shadow: var(--shadow); position: relative; overflow: hidden;
    }
    .card .desc { opacity: 0.85; }
    .thumb {
      position: absolute; right: 16px; bottom: 16px;
      width: 70px; height: 70px; border-radius: 14px;
      background: rgba(255,255,255,0.25); display: grid; place-items: center; font-size: 28px;
    }

    .cat { color: #fff; }
    .cat.house     { background: linear-gradient(135deg, #60a5fa, #3b82f6); }
    .cat.apartment { background: linear-gradient(135deg, #f87171, #ef4444); }
    .cat.office    { background: linear-gradient(135deg, #34d399, #059669); }
    .cat.rowhouse  { background: linear-gradient(135deg, #22d3ee, #06b6d4); }
    .cat.detached  { background: linear-gradient(135deg, #a3e635, #84cc16); }
    .cat.sale      { background: linear-gradient(135deg, #a78bfa, #7c3aed); }
    .cat.allsearch    { background: linear-gradient(135deg, #f472b6, #ec4899); }
    .cat.favorites { background: linear-gradient(135deg, #fb7185, #f59e0b); }

    .placeholder { padding: 14px; border: 1px dashed var(--line); border-radius: 12px; background: #fff; color: #6b7280; text-align: center; }
    .favbar { display: flex; gap: 10px; overflow: auto; }
    .fav { min-width: 220px; background: #fff; border: 1px solid var(--line); border-radius: 12px; padding: 12px; }
  </style>
</head>
<body>

<header>
  <div class="wrap row">
    <div class="brand">
      <div class="logo"></div>
      í™ˆìŠ¤íŒŸ
    </div>
    <nav class="right">
      <a class="btn" href="tenant_favorites.html">ê´€ì‹¬ëª©ë¡</a>

      <!-- ë¹„ë¡œê·¸ì¸ì¼ ë•Œ -->
      <a class="btn" id="btnLogin" href="login.html">ë¡œê·¸ì¸</a>
      <a class="btn primary" id="btnSignup" href="tenant_signup.html">íšŒì›ê°€ì…</a>

      <!-- ë¡œê·¸ì¸ í›„ ë³´ì´ê²Œ -->
      <a class="btn" id="btnProfile" href="profile_setting.html" style="display:none">í”„ë¡œí•„</a>
      <a class="btn" id="btnLogout" href="/logout" style="display:none">ë¡œê·¸ì•„ì›ƒ</a>
    </nav>
  </div>
</header>

<main class="wrap">

  <section class="hero">
    <h1>ì¡°ê±´ ë§ëŠ” ì§‘, ë¹ ë¥´ê²Œ ì°¾ì ğŸ§­</h1>

    <!-- ê²€ìƒ‰ ë°”: ìœ í˜• ë“œë¡­ë‹¤ìš´ + ê²€ìƒ‰ì–´ + ë²„íŠ¼ -->
    <div class="search">
      <label for="ptype" style="font-size:12px; color:#64748b;">ìœ í˜•</label>
      <select id="ptype" aria-label="ë§¤ë¬¼ ìœ í˜• ì„ íƒ">
        <option value="apartment">ì•„íŒŒíŠ¸</option>
        <option value="officetel">ì˜¤í”¼ìŠ¤í…”</option>
        <option value="rowhouse">ì—°ë¦½Â·ë‹¤ì„¸ëŒ€</option>
        <option value="detached">ë‹¨ë…ì£¼íƒ</option>
      </select>
      <input id="q" placeholder="ì§€ì—­ Â· ì§€í•˜ì² ì—­ Â· í‚¤ì›Œë“œë¡œ ê²€ìƒ‰" />
      <button class="btn" onclick="goSearch()">ê²€ìƒ‰</button>
    </div>
  </section>

  <!-- ì¹´í…Œê³ ë¦¬ ì¹´ë“œ -->
  <section class="grid grid-3" style="margin-top:16px">
    <a class="card cat apartment" href="search_apartment.html">
      <h3>ì•„íŒŒíŠ¸</h3>
      <div class="desc">ë‹¨ì§€ ì •ë³´ Â· ì‹¤ê±°ë˜ê°€ ì•Œë¦¼</div>
      <div class="thumb">ğŸ¢</div>
    </a>

    <a class="card cat office" href="search_officetel.html">
      <h3>ì˜¤í”¼ìŠ¤í…”</h3>
      <div class="desc">ë‹¤ì–‘í•œ ì˜µì…˜ê³¼ í•©ë¦¬ì  ì „ì›”ì„¸</div>
      <div class="thumb">ğŸ™ï¸</div>
    </a>

    <a class="card cat rowhouse" href="search_rowhouse.html">
      <h3>ì—°ë¦½Â·ë‹¤ì„¸ëŒ€</h3>
      <div class="desc">ì‹¤ì† ìˆëŠ” ì£¼ê±° ì„ íƒì§€</div>
      <div class="thumb">ğŸ˜ï¸</div>
    </a>

    <a class="card cat detached" href="search_detached.html">
      <h3>ë‹¨ë…ì£¼íƒ</h3>
      <div class="desc">ë§ˆë‹¹/ì£¼ì°¨ ë“± ë¼ì´í”„ìŠ¤íƒ€ì¼ë³„ ì„ íƒ</div>
      <div class="thumb">ğŸ </div>
    </a>

    <a class="card cat allsearch" href="all_listings.html">
          <h3>ì „ì²´ ë§¤ë¬¼</h3>
          <div class="desc">ëª¨ë“  ë§¤ë¬¼ ëª¨ì•„ë³´ê¸°</div>
          <div class="thumb" aria-hidden="true">â¤</div>
        </a>

    <a class="card cat favorites" href="tenant_favorites.html">
      <h3>ë‚´ ì°œëª©ë¡</h3>
      <div class="desc">ì €ì¥í•œ ë§¤ë¬¼ ëª¨ì•„ë³´ê¸°</div>
      <div class="thumb" aria-hidden="true">â¤</div>
    </a>

    
  </section>

  <!-- AI ì¶”ì²œ ë§¤ë¬¼ -->
  <div class="section-title" style="margin-top:20px; margin-bottom:12px">
    <h2 style="margin:0">ì¶”ì²œ ë§¤ë¬¼</h2>
  </div>


</main>

<script>
  // ìœ í˜•â†’ê²€ìƒ‰ í˜ì´ì§€ ë§¤í•‘
  const TYPE_TO_PAGE = {
    apartment: 'search_apartment.html',
    officetel: 'search_officetel.html',
    rowhouse:  'search_rowhouse.html',
    detached:  'search_house.html',
  };

  function goSearch() {
    const type = (document.getElementById('ptype').value || 'apartment').trim();
    const q = document.getElementById('q').value.trim();
    const base = TYPE_TO_PAGE[type] || TYPE_TO_PAGE.apartment;
    const url = base + (q ? ('?q=' + encodeURIComponent(q)) : '');
    location.href = url;
  }

  // Enterë¡œë„ ê²€ìƒ‰ ì‹¤í–‰
  document.getElementById('q').addEventListener('keydown', (e) => {
    if (e.key === 'Enter') goSearch();
  });
  document.getElementById('ptype').addEventListener('keydown', (e) => {
    if (e.key === 'Enter') goSearch();
  });

  // í† ê¸€ ì¹© ë°ëª¨
  document.querySelectorAll('.chip[data-k]').forEach(btn => {
    btn.addEventListener('click', () => btn.classList.toggle('active'));
  });

  function resetFilters() {
    document.querySelectorAll('.chip.active').forEach(b => b.classList.remove('active'));
  }

   (async function checkLogin(){
    try{
      const r = await fetch('/api/me',{credentials:'include'});
      if(!r.ok) return;
      const d = await r.json();
      if(d && d.ok){
        // ë¡œê·¸ì¸ ìƒíƒœ
        document.getElementById('btnLogin').style.display   = 'none';
        document.getElementById('btnSignup').style.display  = 'none';
        document.getElementById('btnProfile').style.display = '';
        document.getElementById('btnLogout').style.display  = '';
      }
    }catch(e){}
  })();
</script>

</body>
</html>
